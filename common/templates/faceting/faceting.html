<div class="faceting-container">
    <div class="columns-container">
        <div class="panel-group" id="ft-cols-1">
            <div class="panel" ng-repeat="fc in vm.reference.facetColumns track by $index">
                <div class="panel-heading">
                    <h4 class="panel-title collapsed">
                        <!-- data-parent="#ft-cols-1" -->
                        <a class="accordion-toggle" href="#ft-col-1-{{$index}}" ng-click="toggleFacet($index)" id="ft-heading-1-{{$index}}" data-toggle="collapse" title="{{fc.comment}}"
                           ng-attr-uib-tooltip="{{::(fc.comment) ? fc.comment : undefined}}" ng-attr-tooltip-placement="{{::(fc.comment) ? 'top' : undefined}}">
                            <span ng-if="::fc.displayname.isHTML" ng-bind-html="::fc.displayname.value"></span>
                            <span ng-if="::!fc.displayname.isHTML" ng-bind="::fc.displayname.value"></span>
                        </a>
                        <!-- <img ng-if="vm.facetModels[$index].isLoading" src="../common/styles/images/loader.gif" class="spinner spinner-sm"/> -->
                        <span ng-if="vm.facetModels[$index].isLoading || vm.facetModels[$index].hasError" ng-click="refreshFacet($index)" 
                              class="glyphicon glyphicon-refresh" ng-class="vm.facetModels[$index].isLoading ? 'glyphicon-refresh-animate' : 'refresh-btn'"
                              tooltip-placement="bottom" uib-tooltip="Click to Retry" tooltip-enable="vm.facetModels[$index].hasError"></span>
                        <span ng-if="vm.facetModels[$index].hasError" class="pull-right glyphicon glyphicon-alert" tooltip-placement="bottom" uib-tooltip="Couldn't Load Facet Data."></span>
                    </h4>
                    <!-- <div class="applied-filters row" ng-show="hasFilter(fc)">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                            <a class="remove-link" ng-click="removeFilter(fc)">
                                <span class="filter-label label label-primary">
                                    Clear All
                                </span>
                            </a>
                            <div class="label label-default filter-label" ng-repeat="filter in fc.filters track by $index">
                                <a class="remove-link" ng-click="removeFilter(fc, $index)"><i class="glyphicon glyphicon-remove"></i></a>
                                <span ng-switch="filter.facetFilterKey">
                                    <i ng-switch-when="choices" class="filter-icon glyphicon glyphicon-check" tooltip-placement="bottom" uib-tooltip="Exact value"></i>
                                    <i ng-switch-when="search" class="filter-icon glyphicon glyphicon-search" tooltip-placement="bottom" uib-tooltip="Pattern"></i>
                                    <i ng-switch-when="ranges" class="filter-icon glyphicon glyphicon-stats" tooltip-placement="bottom" uib-tooltip="Range"></i>
                                </span>
                                <span ng-if="::filter.displayname.isHTML" ng-bind-html="::filter.displayname.value"></span>
                                <span ng-if="::!filter.displayname.isHTML" ng-bind="::filter.displayname.value"></span>
                            </div>
                        </div>
                    </div> -->
                </div>
                <div id="ft-col-1-{{$index}}" class="panel-collapse collapse">
                    <div class="panel-body" ng-switch="fc.preferredMode">
                        <!-- <range-picker ng-switch-when="range" vm="vm" facet-column="fc" initialized="initialized" is-loading="isLoading" index="$index"></range-picker> -->
                        <choice-picker facet-column="fc" facet-model="vm.facetModels[$index]" index="$index"></string-picker>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
