<div ng-controller="recordsetController">

    <navbar></navbar>

    <div id="mainContent" class="container-fluid">

        <alerts alerts="alerts"></alerts>

        <div class="row">
            <!-- permalink -->
            <a id="permalink" class="pull-right" ng-href="{{ permalink() }}">
                <span class="glyphicon glyphicon-bookmark"></span> <strong>Permalink</strong></a>

            <h2 id="page-title">{{ vm.tableDisplayName }}</h2>

        </div>

        <!-- loading spinner -->
        <div ng-show="pageInfo.loading" id="spinner">
            <img src="spinner.gif" style="display: block; margin: 0 auto; width: 32px; height: 32px; opacity: 0.8;"/>
            <div style="margin-top: 15px;">Loading...</div>
        </div>

        <div class="row" style="margin-bottom: 10px;">
            <div class="col-lg-4">
                <!-- search box -->
                <div class="input-group">
                    <input type="text"
                           id="search-input"
                           ng-model="vm.search"
                           class="form-control"
                           enter-key="search(vm.search)"
                           placeholder="search {{vm.tableDisplayName}}">
                    <span class="input-group-btn">
                        <button id="search-submit" class="btn btn-primary" ng-click="search(vm.search)" role="button">
                            &nbsp;<span class="glyphicon glyphicon-search"></span>&nbsp;<!-- Added 2 non-breaking spaces to prevent btn's margins from collapsing and to center the icon-->
                        </button>
                        <button id="search-clear" class="btn btn-primary" ng-disabled="!reference.location.searchTerm" ng-click="clearSearch()" type="button">Reset</button>
                    </span>
                </div>
            </div>
            <div class="col-lg-3 col-md-offset-5" align="right">
            <!-- pagination -->
                <div>
                    <span class="dropdown" style="margin-left: 5px">
                        <button class="btn btn-sm btn-default dropdown-toggle" type="button" data-toggle="dropdown">Items per page
                            <span class="caret"></span></button>
                        <ul class="dropdown-menu dropdown-menu-right">
                            <li ng-if="pageLimits.indexOf(pageInfo.pageLimit) === -1"><a id="custom-page-size" href ng-click="pageLimit(pageInfo.pageLimit)">
                                <span class="glyphicon glyphicon-ok"></span>
                                {{ pageInfo.pageLimit }} (Custom)</a>
                            </li>
                            <li ng-repeat="limit in pageLimits"><a href ng-click="pageLimit(limit)">
                                <span class="glyphicon" ng-class="pageInfo.pageLimit === limit ? 'glyphicon-ok' : 'glyphicon-invisible'"></span>
                                {{ limit }}</a>
                            </li>
                        </ul>
                    </span>
                </div>
            </div>
        </div>

        <!-- record table -->
        <div ng-if="vm.rowValues.length > 0">
            <record-table id="rs-{{vm.tableDisplayName}}" vm="vm" toggle-sort-order="toggleSortOrder()" sortby="sortby(colname)"></record-table>
        </div>

            <!-- bottom pagination -->
        <div class="pager">
            <button type="button" class="btn btn-primary btn-sm" ng-click="before()" ng-disabled="pageInfo.previousButtonDisabled">
                <span class="glyphicon glyphicon-chevron-left"></span>
            </button>
            <button type="button" class="btn btn-primary btn-sm" ng-click="after()" ng-disabled="pageInfo.nextButtonDisabled">
                <span class="glyphicon glyphicon-chevron-right"></span>
            </button>
        </div>
    </div>

</div>
